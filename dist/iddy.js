var Iddy=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function u(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(u,a)}c((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=this;e.__esModule=!0;var u=n(1),a=n(2);e.Authentication=a.default;e.createIddyClient=function(t){return r(i,void 0,void 0,function(){return o(this,function(e){return console.log("test = createIddyClient"),[2,new u.default(t)]})})};e.functionA=function(){console.log("functionA - OK 3")};e.functionB=function(){console.log("functionB - OK 3")}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function u(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(u,a)}c((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};e.__esModule=!0;var i="iddy.user",u="iddy.isAuthenticated",a=function(t){var e=this;this.init=function(t){t.domain?e.domain="https://"+t.domain||!1:e.domain=""},this.getUser=function(){return r(e,void 0,void 0,function(){var t,e;return o(this,function(n){switch(n.label){case 0:return(t=(t=null)?JSON.parse(t):null)?[3,4]:[4,fetch(this.domain+"/api/me",{mode:"cors",credentials:"include"})];case 1:return(e=n.sent()).ok?[4,e.json()]:[3,3];case 2:return t=n.sent(),localStorage.setItem(i,JSON.stringify(t)),localStorage.setItem(u,"true"),[3,4];case 3:t=null,n.label=4;case 4:return[2,t]}})})},this.isAuthenticated=function(){return r(e,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.getUser()];case 1:return[2,!!t.sent()]}})})},this.loginWithRedirect=function(t){var n=t.redirectUri;window.location.href=e.domain+"/login?redirectUri="+encodeURIComponent(n)},this.logout=function(t){var n=t.returnTo;return r(e,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return localStorage.removeItem(i),localStorage.removeItem(u),[4,fetch(this.domain+"/api/logout",{mode:"cors",credentials:"include"})];case 1:return[4,t.sent().json()];case 2:return t.sent(),window.location.href=n,[2]}})})},t.domain?this.domain="https://"+t.domain||!1:this.domain=""};e.default=a},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function u(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(u,a)}c((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};e.__esModule=!0;var i="iddy.user",u="iddy.isAuthenticated",a=function(t){var e=this;this.init=function(t){t.domain?e.domain="https://"+t.domain||!1:e.domain=""},this.getUser=function(){return r(e,void 0,void 0,function(){var t,e;return o(this,function(n){switch(n.label){case 0:return(t=(t=null)?JSON.parse(t):null)?[3,4]:[4,fetch(this.domain+"/api/me",{mode:"cors",credentials:"include"})];case 1:return(e=n.sent()).ok?[4,e.json()]:[3,3];case 2:return t=n.sent(),localStorage.setItem(i,JSON.stringify(t)),localStorage.setItem(u,"true"),[3,4];case 3:t=null,n.label=4;case 4:return[2,t]}})})},this.isAuthenticated=function(){return r(e,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,this.getUser()];case 1:return[2,!!t.sent()]}})})},this.loginWithRedirect=function(t){var n=t.redirectUri;window.location.href=e.domain+"/login?redirectUri="+encodeURIComponent(n)},this.logout=function(t){var n=t.returnTo;return r(e,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return localStorage.removeItem(i),localStorage.removeItem(u),[4,fetch(this.domain+"/api/logout",{mode:"cors",credentials:"include"})];case 1:return[4,t.sent().json()];case 2:return t.sent(),window.location.href=n,[2]}})})},t.domain?this.domain="https://"+t.domain||!1:this.domain=""};e.default=a}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9JZGR5L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL0lkZHkvLi9pbmRleC50cyIsIndlYnBhY2s6Ly9JZGR5Ly4vaWRkeUNsaWVudC50cyIsIndlYnBhY2s6Ly9JZGR5Ly4vYXV0aGVudGljYXRpb24udHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJfX2F3YWl0ZXIiLCJ0aGlzIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJzdGVwIiwibmV4dCIsImUiLCJyZWplY3RlZCIsInJlc3VsdCIsImRvbmUiLCJ0aGVuIiwiYXBwbHkiLCJfX2dlbmVyYXRvciIsImJvZHkiLCJmIiwieSIsImciLCJfIiwibGFiZWwiLCJzZW50IiwidHJ5cyIsIm9wcyIsInZlcmIiLCJ0aHJvdyIsInJldHVybiIsIml0ZXJhdG9yIiwidiIsIm9wIiwiVHlwZUVycm9yIiwicG9wIiwibGVuZ3RoIiwicHVzaCIsIl90aGlzIiwiaWRkeUNsaWVudF8xIiwiYXV0aGVudGljYXRpb25fMSIsIkF1dGhlbnRpY2F0aW9uIiwiY3JlYXRlSWRkeUNsaWVudCIsIm9wdGlvbnMiLCJfYSIsImNvbnNvbGUiLCJsb2ciLCJmdW5jdGlvbkEiLCJmdW5jdGlvbkIiLCJ1c2VyQ2FjaGVLZXkiLCJpc0F1dGhlbnRpY2F0ZWRDYWNoZUtleSIsIklkZHlDbGllbnQiLCJjbGllbnRPcHRpb25zIiwiaW5pdCIsImRvbWFpbiIsImdldFVzZXIiLCJ1c2VyIiwicmVzcG9uc2UiLCJKU09OIiwicGFyc2UiLCJmZXRjaCIsImNyZWRlbnRpYWxzIiwib2siLCJqc29uIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImlzQXV0aGVudGljYXRlZCIsImxvZ2luV2l0aFJlZGlyZWN0IiwicmVkaXJlY3RVcmkiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJlbmNvZGVVUklDb21wb25lbnQiLCJsb2dvdXQiLCJyZXR1cm5UbyIsIl9iIiwicmVtb3ZlSXRlbSJdLCJtYXBwaW5ncyI6InFCQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUEwREEsT0FyREFGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsRUFBQSxDQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsWUFBQSxDQUF3REMsTUFBQSxXQUV4RFAsT0FBQUMsZUFBQWIsRUFBQSxjQUFpRG1CLE9BQUEsS0FRakRyQixFQUFBc0IsRUFBQSxTQUFB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QUcvRHJELEtBQUFxRCxPQUFBLElBS0F4RixFQUFBLFFBQUEyRSIsImZpbGUiOiJpZGR5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHJlc3VsdC52YWx1ZSk7IH0pLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbnZhciBfX2dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcbiAgICB9XG59O1xudmFyIF90aGlzID0gdGhpcztcbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG52YXIgaWRkeUNsaWVudF8xID0gcmVxdWlyZShcIi4vaWRkeUNsaWVudFwiKTtcbnZhciBhdXRoZW50aWNhdGlvbl8xID0gcmVxdWlyZShcIi4vYXV0aGVudGljYXRpb25cIik7XG5leHBvcnRzLkF1dGhlbnRpY2F0aW9uID0gYXV0aGVudGljYXRpb25fMVtcImRlZmF1bHRcIl07XG52YXIgY3JlYXRlSWRkeUNsaWVudCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7IHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGlkZHlDbGllbnQ7XG4gICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICBjb25zb2xlLmxvZygndGVzdCA9IGNyZWF0ZUlkZHlDbGllbnQnKTtcbiAgICAgICAgaWRkeUNsaWVudCA9IG5ldyBpZGR5Q2xpZW50XzFbXCJkZWZhdWx0XCJdKG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgaWRkeUNsaWVudF07XG4gICAgfSk7XG59KTsgfTtcbmV4cG9ydHMuY3JlYXRlSWRkeUNsaWVudCA9IGNyZWF0ZUlkZHlDbGllbnQ7XG52YXIgZnVuY3Rpb25BID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnNvbGUubG9nKCdmdW5jdGlvbkEgLSBPSyAzJyk7XG59O1xuZXhwb3J0cy5mdW5jdGlvbkEgPSBmdW5jdGlvbkE7XG52YXIgZnVuY3Rpb25CID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnNvbGUubG9nKCdmdW5jdGlvbkIgLSBPSyAzJyk7XG59O1xuZXhwb3J0cy5mdW5jdGlvbkIgPSBmdW5jdGlvbkI7XG4iLCJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUocmVzdWx0LnZhbHVlKTsgfSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xudmFyIF9fZ2VuZXJhdG9yID0gKHRoaXMgJiYgdGhpcy5fX2dlbmVyYXRvcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIGJvZHkpIHtcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xuICAgIH1cbn07XG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xudmFyIHVzZXJDYWNoZUtleSA9ICdpZGR5LnVzZXInO1xudmFyIGlzQXV0aGVudGljYXRlZENhY2hlS2V5ID0gJ2lkZHkuaXNBdXRoZW50aWNhdGVkJztcbnZhciBJZGR5Q2xpZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIElkZHlDbGllbnQoY2xpZW50T3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLmluaXQgPSBmdW5jdGlvbiAoY2xpZW50T3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKGNsaWVudE9wdGlvbnMuZG9tYWluKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuZG9tYWluID0gXCJodHRwczovL1wiICsgY2xpZW50T3B0aW9ucy5kb21haW4gfHwgJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5kb21haW4gPSAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXRVc2VyID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHVzZXIsIHJlc3BvbnNlO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlciA9IG51bGwgLy8gbG9jYWxTdG9yYWdlLmdldEl0ZW0odXNlckNhY2hlS2V5KVxuICAgICAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlciA9IHVzZXIgPyBKU09OLnBhcnNlKHVzZXIpIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXVzZXIpIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZmV0Y2godGhpcy5kb21haW4gKyBcIi9hcGkvbWVcIiwgeyBtb2RlOiAnY29ycycsIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzcG9uc2UuanNvbigpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlciA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHVzZXJDYWNoZUtleSwgSlNPTi5zdHJpbmdpZnkodXNlcikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oaXNBdXRoZW50aWNhdGVkQ2FjaGVLZXksICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDQ7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHVzZXJdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTsgfTtcbiAgICAgICAgdGhpcy5pc0F1dGhlbnRpY2F0ZWQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdXNlcjtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5nZXRVc2VyKCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sICEhdXNlcl07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pOyB9O1xuICAgICAgICB0aGlzLmxvZ2luV2l0aFJlZGlyZWN0ID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICB2YXIgcmVkaXJlY3RVcmkgPSBfYS5yZWRpcmVjdFVyaTtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gX3RoaXMuZG9tYWluICsgXCIvbG9naW4/cmVkaXJlY3RVcmk9XCIgKyBlbmNvZGVVUklDb21wb25lbnQocmVkaXJlY3RVcmkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmxvZ291dCA9IGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdmFyIHJldHVyblRvID0gX2EucmV0dXJuVG87XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSwgZGF0YTtcbiAgICAgICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh1c2VyQ2FjaGVLZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGlzQXV0aGVudGljYXRlZENhY2hlS2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBmZXRjaCh0aGlzLmRvbWFpbiArIFwiL2FwaS9sb2dvdXRcIiwgeyBtb2RlOiAnY29ycycsIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScgfSldO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlc3BvbnNlLmpzb24oKV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHJldHVyblRvO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGlmIChjbGllbnRPcHRpb25zLmRvbWFpbikge1xuICAgICAgICAgICAgdGhpcy5kb21haW4gPSBcImh0dHBzOi8vXCIgKyBjbGllbnRPcHRpb25zLmRvbWFpbiB8fCAnJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZG9tYWluID0gJyc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIElkZHlDbGllbnQ7XG59KCkpO1xuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBJZGR5Q2xpZW50O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHJlc3VsdC52YWx1ZSk7IH0pLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbnZhciBfX2dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcbiAgICB9XG59O1xuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbnZhciB1c2VyQ2FjaGVLZXkgPSAnaWRkeS51c2VyJztcbnZhciBpc0F1dGhlbnRpY2F0ZWRDYWNoZUtleSA9ICdpZGR5LmlzQXV0aGVudGljYXRlZCc7XG52YXIgQXV0aGVudGljYXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQXV0aGVudGljYXRpb24oY2xpZW50T3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLmluaXQgPSBmdW5jdGlvbiAoY2xpZW50T3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKGNsaWVudE9wdGlvbnMuZG9tYWluKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuZG9tYWluID0gXCJodHRwczovL1wiICsgY2xpZW50T3B0aW9ucy5kb21haW4gfHwgJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5kb21haW4gPSAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXRVc2VyID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHVzZXIsIHJlc3BvbnNlO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlciA9IG51bGwgLy8gbG9jYWxTdG9yYWdlLmdldEl0ZW0odXNlckNhY2hlS2V5KVxuICAgICAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlciA9IHVzZXIgPyBKU09OLnBhcnNlKHVzZXIpIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXVzZXIpIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZmV0Y2godGhpcy5kb21haW4gKyBcIi9hcGkvbWVcIiwgeyBtb2RlOiAnY29ycycsIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzcG9uc2UuanNvbigpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlciA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHVzZXJDYWNoZUtleSwgSlNPTi5zdHJpbmdpZnkodXNlcikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oaXNBdXRoZW50aWNhdGVkQ2FjaGVLZXksICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDQ7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHVzZXJdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTsgfTtcbiAgICAgICAgdGhpcy5pc0F1dGhlbnRpY2F0ZWQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdXNlcjtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5nZXRVc2VyKCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sICEhdXNlcl07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pOyB9O1xuICAgICAgICB0aGlzLmxvZ2luV2l0aFJlZGlyZWN0ID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICB2YXIgcmVkaXJlY3RVcmkgPSBfYS5yZWRpcmVjdFVyaTtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gX3RoaXMuZG9tYWluICsgXCIvbG9naW4/cmVkaXJlY3RVcmk9XCIgKyBlbmNvZGVVUklDb21wb25lbnQocmVkaXJlY3RVcmkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmxvZ291dCA9IGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdmFyIHJldHVyblRvID0gX2EucmV0dXJuVG87XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSwgZGF0YTtcbiAgICAgICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh1c2VyQ2FjaGVLZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGlzQXV0aGVudGljYXRlZENhY2hlS2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBmZXRjaCh0aGlzLmRvbWFpbiArIFwiL2FwaS9sb2dvdXRcIiwgeyBtb2RlOiAnY29ycycsIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScgfSldO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlc3BvbnNlLmpzb24oKV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHJldHVyblRvO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGlmIChjbGllbnRPcHRpb25zLmRvbWFpbikge1xuICAgICAgICAgICAgdGhpcy5kb21haW4gPSBcImh0dHBzOi8vXCIgKyBjbGllbnRPcHRpb25zLmRvbWFpbiB8fCAnJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZG9tYWluID0gJyc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIEF1dGhlbnRpY2F0aW9uO1xufSgpKTtcbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gQXV0aGVudGljYXRpb247XG4iXSwic291cmNlUm9vdCI6IiJ9